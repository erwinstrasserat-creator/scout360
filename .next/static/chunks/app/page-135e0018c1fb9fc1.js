(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4601:function(e,t,a){Promise.resolve().then(a.bind(a,5460))},5460:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),l=a(2265),n=a(9376),r=a(5978),o=a(7293),i=a(7648),c=a(575);function d(e){let{player:t}=e,{role:a}=(0,c.a)();return(0,s.jsxs)("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4 flex gap-4 hover:border-emerald-500/50 transition",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-xl overflow-hidden bg-slate-800 shrink-0",children:t.imageUrl?(0,s.jsx)("img",{src:t.imageUrl,alt:t.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"flex items-center justify-center text-xs text-slate-500 h-full",children:"Kein Bild"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold truncate",children:t.name}),(0,s.jsxs)("p",{className:"text-slate-400 text-sm truncate",children:[t.age," Jahre • ",t.position," • ",t.club]}),(0,s.jsxs)("p",{className:"text-slate-500 text-xs",children:[t.nationality," • ",t.league]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-3",children:[(0,s.jsx)(i.default,{href:"/players/".concat(t.id),className:"rounded-lg bg-slate-800 px-3 py-1 text-xs hover:bg-slate-700 transition",children:"Profil"}),(0,s.jsx)(i.default,{href:"/players/".concat(t.id,"/videos"),className:"rounded-lg bg-slate-800 px-3 py-1 text-xs hover:bg-slate-700 transition",children:"Videos"}),"admin"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.default,{href:"/admin/assign-player/".concat(t.id),className:"rounded-lg bg-emerald-600 px-3 py-1 text-xs font-semibold text-slate-900 hover:bg-emerald-500 transition",children:"Bedarfsliste"}),(0,s.jsx)(i.default,{href:"/admin/reports/new?player=".concat(t.id),className:"rounded-lg bg-blue-600 px-3 py-1 text-xs font-semibold text-slate-900 hover:bg-blue-500 transition",children:"Report"})]})]})]})]})}function u(){let{user:e,loading:t}=(0,c.a)(),a=(0,n.useRouter)(),[i,u]=(0,l.useState)([]),[x,m]=(0,l.useState)(!0),[p,g]=(0,l.useState)(null),[h,f]=(0,l.useState)(""),[b,v]=(0,l.useState)(23),[j,N]=(0,l.useState)(""),[S,E]=(0,l.useState)(""),[y,_]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[I,P]=(0,l.useState)(""),[A,R]=(0,l.useState)(20);(0,l.useEffect)(()=>{t||e||a.push("/login")},[t,e,a]),(0,l.useEffect)(()=>{e&&(async()=>{try{let e=(await (0,r.getDocs)((0,r.collection)(o.db,"players"))).docs.map(e=>({id:e.id,...e.data()}));u(e)}catch(e){console.error(e),g("Fehler beim Laden der Spieler.")}finally{m(!1)}})()},[e]),(0,l.useEffect)(()=>{let e=()=>{window.innerHeight+window.scrollY>=document.body.scrollHeight-200&&R(e=>e+20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let B=(0,l.useMemo)(()=>[...new Set(i.map(e=>e.position))],[i]),L=(0,l.useMemo)(()=>[...new Set(i.map(e=>e.league))],[i]),F=(0,l.useMemo)(()=>[...new Set(i.map(e=>e.nationality))],[i]),k=(0,l.useMemo)(()=>{let e=i.filter(e=>{if(""!==b&&e.age>b)return!1;if(h){let t=h.toLowerCase();if(!"".concat(e.name," ").concat(e.club," ").concat(e.league," ").concat(e.position," ").concat(e.nationality).toLowerCase().includes(t))return!1}return(!j||e.position===j)&&(!S||e.league===S)&&(!y||e.nationality===y)&&(!w||e.foot===w)});switch(I){case"name-asc":e.sort((e,t)=>e.name.localeCompare(t.name));break;case"age-asc":e.sort((e,t)=>e.age-t.age);break;case"age-desc":e.sort((e,t)=>t.age-e.age);break;case"pot-desc":e.sort((e,t)=>t.potentialRating-e.potentialRating);break;case"pot-asc":e.sort((e,t)=>e.potentialRating-t.potentialRating);break;case"pos-asc":e.sort((e,t)=>e.position.localeCompare(t.position))}return e},[i,h,b,j,S,y,w,I]);return t||!e?(0,s.jsx)("main",{className:"p-6 text-sm text-slate-400",children:"Pr\xfcfe Login ..."}):(0,s.jsxs)("main",{className:"space-y-6 p-4 md:p-6",children:[(0,s.jsxs)("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"Filter"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-7 text-sm",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 col-span-2",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Suche"}),(0,s.jsx)("input",{value:h,onChange:e=>f(e.target.value),placeholder:"Name, Verein, Liga ...",className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1 outline-none focus:border-emerald-400"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Max. Alter"}),(0,s.jsx)("input",{type:"number",min:15,max:30,value:""===b?"":b,onChange:e=>v(""===e.target.value?"":Number(e.target.value)),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1 outline-none focus:border-emerald-400"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Position"}),(0,s.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Alle"}),B.map(e=>(0,s.jsx)("option",{children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Liga"}),(0,s.jsxs)("select",{value:S,onChange:e=>E(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Alle"}),L.map(e=>(0,s.jsx)("option",{children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Nation"}),(0,s.jsxs)("select",{value:y,onChange:e=>_(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Alle"}),F.map(e=>(0,s.jsx)("option",{children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Fu\xdf"}),(0,s.jsxs)("select",{value:w,onChange:e=>C(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Alle"}),["links","rechts","beidf\xfc\xdfig"].map(e=>(0,s.jsx)("option",{children:e},e))]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{className:"text-xs text-slate-400",children:"Sortieren nach"}),(0,s.jsxs)("select",{value:I,onChange:e=>P(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-1",children:[(0,s.jsx)("option",{value:"",children:"Standard"}),(0,s.jsx)("option",{value:"name-asc",children:"Name (A–Z)"}),(0,s.jsx)("option",{value:"age-asc",children:"Alter (jung → alt)"}),(0,s.jsx)("option",{value:"age-desc",children:"Alter (alt → jung)"}),(0,s.jsx)("option",{value:"pot-desc",children:"Potenzial (hoch → niedrig)"}),(0,s.jsx)("option",{value:"pot-asc",children:"Potenzial (niedrig → hoch)"}),(0,s.jsx)("option",{value:"pos-asc",children:"Position (A–Z)"})]})]})]}),(0,s.jsx)("div",{className:"mt-2 text-xs text-slate-400",children:x?"Lade Spieler...":"".concat(k.length," von ").concat(i.length," Spielern")})]}),p&&(0,s.jsx)("p",{className:"text-sm text-red-400",children:p}),(0,s.jsx)("section",{className:"grid gap-3 md:grid-cols-2",children:k.slice(0,A).map(e=>(0,s.jsx)(d,{player:e},e.id))}),A<k.length&&(0,s.jsx)("div",{className:"text-center text-slate-400 py-6",children:"L\xe4dt weitere Spieler..."})]})}},575:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return c},a:function(){return d}});var s=a(7437),l=a(2265),n=a(7293),r=a(3301),o=a(5978);let i=(0,l.createContext)({user:null,role:null,loading:!0,logout:async()=>{}});function c(e){let{children:t}=e,[a,c]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),[x,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,r.Aj)(n.I,async e=>{if(c(e),e){let t=await (0,o.getDoc)((0,o.doc)(n.db,"userRoles",e.uid));u(t.exists()?t.data().role:"none")}else u(null);m(!1)});return()=>e()},[]);let p=async()=>{await (0,r.w7)(n.I)};return(0,s.jsx)(i.Provider,{value:{user:a,role:d,loading:x,logout:p},children:t})}let d=()=>(0,l.useContext)(i)},7293:function(e,t,a){"use strict";a.d(t,{I:function(){return u},db:function(){return d},t:function(){return x}});var s=a(738),l=a(5978),n=a(3301),r=a(62),o=a(257);let i={apiKey:o.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:o.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:o.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:o.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:o.env.NEXT_PUBLIC_FIREBASE_APP_ID};i.projectId||console.warn("Firebase config not set. Check .env.local");let c=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)(i),d=(0,l.getFirestore)(c),u=(0,n.v0)(c),x=(0,r.cF)(c)},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[358,990,933,648,971,117,744],function(){return e(e.s=4601)}),_N_E=e.O()}]);