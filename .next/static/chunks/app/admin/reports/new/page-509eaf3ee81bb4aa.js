(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{7817:function(e,t,s){Promise.resolve().then(s.bind(s,8670))},8670:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),l=s(2265),r=s(9376),n=s(5978),c=s(7293),o=s(575);function i(){let e=(0,r.useSearchParams)(),t=(0,r.useRouter)(),{user:s}=(0,o.a)(),i=e.get("player"),[u,d]=(0,l.useState)(null),[x,h]=(0,l.useState)(null),[m,b]=(0,l.useState)(!0),[p,g]=(0,l.useState)(!1),[f,N]=(0,l.useState)(""),[v,j]=(0,l.useState)(""),[S,y]=(0,l.useState)(""),[E,_]=(0,l.useState)(""),[I,C]=(0,l.useState)(3),[P,R]=(0,l.useState)("durchschnittlich"),[B,w]=(0,l.useState)("beobachten"),[A,D]=(0,l.useState)("");(0,l.useEffect)(()=>{i&&(async()=>{let e=await (0,n.getDoc)((0,n.doc)(c.db,"players",i));e.exists()&&d({id:e.id,...e.data()}),b(!1)})()},[i]);let F=async e=>{if(e.preventDefault(),s&&i)try{g(!0),h("Speichere Report..."),await (0,n.addDoc)((0,n.collection)(c.db,"scoutingReports"),{playerId:i,createdBy:s.uid,createdByEmail:s.email,createdAt:Date.now(),matchDate:f,opponent:v,competition:S,minutesObserved:""===E?null:Number(E),rating:I,currentForm:P,recommendation:B,notes:A}),h("Report gespeichert!"),setTimeout(()=>{t.push("/players/".concat(i))},1e3)}catch(e){console.error(e),h("Fehler beim Speichern.")}finally{g(!1)}};return m?(0,a.jsx)("main",{className:"p-6 text-slate-400",children:"Spieler wird geladen..."}):u?(0,a.jsxs)("main",{className:"space-y-6",children:[(0,a.jsxs)("h1",{className:"text-xl font-semibold",children:["Neuer Scouting-Report f\xfcr ",u.name]}),x&&(0,a.jsx)("p",{className:"text-emerald-400",children:x}),(0,a.jsxs)("form",{className:"space-y-5",onSubmit:F,children:[(0,a.jsxs)("section",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Matchdaten"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Datum"}),(0,a.jsx)("input",{type:"date",value:f,onChange:e=>N(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Gegner"}),(0,a.jsx)("input",{value:v,onChange:e=>j(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Wettbewerb"}),(0,a.jsx)("input",{value:S,onChange:e=>y(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Minuten beobachtet"}),(0,a.jsx)("input",{type:"number",min:0,max:120,value:E,onChange:e=>_(""===e.target.value?"":Number(e.target.value)),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1"})]})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Bewertung"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Gesamtbewertung"}),(0,a.jsx)("select",{value:I,onChange:e=>C(Number(e.target.value)),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("option",{value:e,children:[e," Sterne"]},e))})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Form"}),(0,a.jsxs)("select",{value:P,onChange:e=>R(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1",children:[(0,a.jsx)("option",{children:"sehr gut"}),(0,a.jsx)("option",{children:"gut"}),(0,a.jsx)("option",{children:"durchschnittlich"}),(0,a.jsx)("option",{children:"schwach"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{className:"text-xs text-slate-400",children:"Empfehlung"}),(0,a.jsxs)("select",{value:B,onChange:e=>w(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-2 py-1",children:[(0,a.jsx)("option",{value:"sofort verpflichten",children:"sofort verpflichten"}),(0,a.jsx)("option",{value:"beobachten",children:"beobachten"}),(0,a.jsx)("option",{value:"nicht geeignet",children:"nicht geeignet"})]})]})]}),(0,a.jsxs)("section",{className:"rounded-xl border border-slate-800 bg-slate-900/60 p-4 space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Notizen"}),(0,a.jsx)("textarea",{rows:6,value:A,onChange:e=>D(e.target.value),className:"rounded-lg bg-slate-950 border border-slate-700 px-3 py-2 text-sm",placeholder:"Detailanalyse, Verhalten im Spiel, Technik, Umschaltverhalten, etc."})]}),(0,a.jsx)("button",{type:"submit",disabled:p,className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-emerald-400 disabled:opacity-50",children:p?"Speichere...":"Report speichern"})]})]}):(0,a.jsx)("main",{className:"p-6 text-red-400",children:"Spieler nicht gefunden."})}},575:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return i},a:function(){return u}});var a=s(7437),l=s(2265),r=s(7293),n=s(3301),c=s(5978);let o=(0,l.createContext)({user:null,role:null,loading:!0,logout:async()=>{}});function i(e){let{children:t}=e,[s,i]=(0,l.useState)(null),[u,d]=(0,l.useState)(null),[x,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let e=(0,n.Aj)(r.I,async e=>{if(i(e),e){let t=await (0,c.getDoc)((0,c.doc)(r.db,"userRoles",e.uid));d(t.exists()?t.data().role:"none")}else d(null);h(!1)});return()=>e()},[]);let m=async()=>{await (0,n.w7)(r.I)};return(0,a.jsx)(o.Provider,{value:{user:s,role:u,loading:x,logout:m},children:t})}let u=()=>(0,l.useContext)(o)},7293:function(e,t,s){"use strict";s.d(t,{I:function(){return d},db:function(){return u},t:function(){return x}});var a=s(738),l=s(5978),r=s(3301),n=s(62),c=s(257);let o={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID};o.projectId||console.warn("Firebase config not set. Check .env.local");let i=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)(o),u=(0,l.getFirestore)(i),d=(0,r.v0)(i),x=(0,n.cF)(i)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[358,990,933,971,117,744],function(){return e(e.s=7817)}),_N_E=e.O()}]);