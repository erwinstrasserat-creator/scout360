(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{656:function(e,t,s){Promise.resolve().then(s.bind(s,340))},340:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var l=s(7437),a=s(2265),r=s(5978),n=s(7293),c=s(7648);function i(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null),[h,o]=(0,a.useState)(null),p=async()=>{i(!0),x(null);try{let e=(await (0,r.getDocs)((0,r.collection)(n.db,"players"))).docs.map(e=>({id:e.id,...e.data()}));t(e)}catch(e){console.error(e),x("Fehler beim Laden der Spieler.")}finally{i(!1)}};(0,a.useEffect)(()=>{p()},[]);let m=async e=>{if(confirm("Spieler wirklich l\xf6schen?")){o(e);try{await (0,r.deleteDoc)((0,r.doc)(n.db,"players",e)),t(t=>t.filter(t=>t.id!==e))}catch(e){console.error(e),alert("Fehler beim L\xf6schen.")}finally{o(null)}}};return(0,l.jsxs)("main",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Spieler verwalten"}),(0,l.jsx)(c.default,{href:"/admin/players/new",className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-950 hover:bg-emerald-400",children:"+ Neuer Spieler"})]}),s&&(0,l.jsx)("p",{className:"text-slate-400 text-sm",children:"Lade Spieler..."}),d&&(0,l.jsx)("p",{className:"text-red-400 text-sm",children:d}),(0,l.jsx)("div",{className:"rounded-2xl border border-slate-800 bg-slate-900/60",children:(0,l.jsxs)("table",{className:"w-full text-sm",children:[(0,l.jsx)("thead",{className:"border-b border-slate-800 text-xs text-slate-400",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Name"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Alter"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Pos"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Club"}),(0,l.jsx)("th",{className:"px-3 py-2 text-left",children:"Liga"}),(0,l.jsx)("th",{className:"px-3 py-2 text-right",children:"Aktionen"})]})}),(0,l.jsxs)("tbody",{children:[e.map(e=>(0,l.jsxs)("tr",{className:"border-b border-slate-800/60",children:[(0,l.jsx)("td",{className:"px-3 py-2",children:e.name}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.age}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.position}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.club}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.league}),(0,l.jsxs)("td",{className:"px-3 py-2 text-right space-x-2",children:[(0,l.jsx)(c.default,{href:"/admin/players/".concat(e.id),className:"text-xs text-emerald-400 hover:text-emerald-300",children:"Bearbeiten"}),(0,l.jsx)("button",{onClick:()=>m(e.id),disabled:h===e.id,className:"text-xs text-red-400 hover:text-red-300 disabled:opacity-60",children:h===e.id?"L\xf6sche...":"L\xf6schen"})]})]},e.id)),0===e.length&&!s&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"px-3 py-4 text-center text-xs text-slate-500",children:"Noch keine Spieler vorhanden."})})]})]})})]})}},7293:function(e,t,s){"use strict";s.d(t,{I:function(){return h},db:function(){return x},t:function(){return o}});var l=s(738),a=s(5978),r=s(3301),n=s(62),c=s(257);let i={apiKey:c.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:c.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:c.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:c.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:c.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:c.env.NEXT_PUBLIC_FIREBASE_APP_ID};i.projectId||console.warn("Firebase config not set. Check .env.local");let d=(0,l.C6)().length?(0,l.Mq)():(0,l.ZF)(i),x=(0,a.getFirestore)(d),h=(0,r.v0)(d),o=(0,n.cF)(d)}},function(e){e.O(0,[358,990,933,648,971,117,744],function(){return e(e.s=656)}),_N_E=e.O()}]);