(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[940],{8159:function(e,t,s){Promise.resolve().then(s.bind(s,531))},531:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),r=s(9376),l=s(7648),d=s(5978),i=s(7293);function c(){let{playerId:e}=(0,r.useParams)(),t=(0,r.useRouter)(),[s,c]=(0,n.useState)(null),[o,u]=(0,n.useState)([]),[m,h]=(0,n.useState)([]),[x,p]=(0,n.useState)(""),[b,f]=(0,n.useState)(!0),[g,N]=(0,n.useState)(!1),[_,E]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{f(!0);let t=await (0,d.getDoc)((0,d.doc)(i.db,"players",e));t.exists()&&c({id:t.id,...t.data()}),u((await (0,d.getDocs)((0,d.collection)(i.db,"clubNeeds"))).docs.map(e=>({id:e.id,...e.data()}))),h((await (0,d.getDocs)((0,d.collection)(i.db,"needAssignments"))).docs.map(e=>({id:e.id,...e.data()})).filter(t=>t.playerId===e)),f(!1)})()},[e]);let S=async()=>{if(!x){E("Bitte eine Bedarfsliste ausw\xe4hlen.");return}if(m.some(e=>e.needId===x)){E("Spieler ist dieser Bedarfsliste bereits zugeordnet.");return}try{N(!0),E("Speichere Zuordnung..."),await (0,d.addDoc)((0,d.collection)(i.db,"needAssignments"),{needId:x,playerId:e,createdAt:Date.now()}),E("Spieler erfolgreich zugeordnet."),N(!1),setTimeout(()=>{t.push("/players/".concat(e))},800)}catch(e){console.error(e),E("Fehler beim Speichern."),N(!1)}};return s?(0,a.jsxs)("main",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Spieler Bedarfsliste zuordnen"}),(0,a.jsx)(l.default,{href:"/players/".concat(e),className:"text-slate-400 hover:text-slate-200 text-sm",children:"← zur\xfcck zum Spielerprofil"}),(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:s.name}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm",children:[s.age," Jahre • ",s.position," • ",s.club]})]}),_&&(0,a.jsx)("p",{className:"text-sm text-emerald-400",children:_}),(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4 space-y-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Bedarfsliste ausw\xe4hlen"}),0===o.length&&(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Noch keine Bedarfslisten erstellt."}),(0,a.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:"rounded-lg border border-slate-700 bg-slate-950 px-2 py-2 text-sm w-full",children:[(0,a.jsx)("option",{value:"",children:"Bitte ausw\xe4hlen..."}),o.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.clubName," — ",e.position]},e.id))]}),(0,a.jsx)("button",{onClick:S,disabled:g,className:"rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-900 hover:bg-emerald-400 disabled:opacity-50",children:g?"Speichere...":"Zuordnen"})]}),(0,a.jsxs)("section",{className:"rounded-2xl border border-slate-800 bg-slate-900/60 p-4 space-y-2",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"Bereits zugeordnet"}),0===m.length&&(0,a.jsx)("p",{className:"text-slate-500 text-sm",children:"Keine Zuordnungen."}),m.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-xl border border-slate-800 bg-slate-950/60 text-sm",children:[(0,a.jsx)("p",{className:"text-slate-100",children:e.needId}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["Zugeordnet am"," ",new Date(e.createdAt).toLocaleDateString("de-DE")]})]},e.id))]})]}):(0,a.jsx)("main",{className:"p-6 text-red-400",children:"Spieler nicht gefunden."})}},7293:function(e,t,s){"use strict";s.d(t,{I:function(){return u},db:function(){return o},t:function(){return m}});var a=s(738),n=s(5978),r=s(3301),l=s(62),d=s(257);let i={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID};i.projectId||console.warn("Firebase config not set. Check .env.local");let c=(0,a.C6)().length?(0,a.Mq)():(0,a.ZF)(i),o=(0,n.getFirestore)(c),u=(0,r.v0)(c),m=(0,l.cF)(c)},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[358,990,933,648,971,117,744],function(){return e(e.s=8159)}),_N_E=e.O()}]);